{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold underline">
    Hello, Tailwind CSS!
</h1>
<div id="result"></div>
<button hx-get="/data" hx-target="#result" class="mt-4 p-2 bg-blue-500 text-white rounded">
    Carregar Dados
</button>
<script>
    document.addEventListener('htmx:afterOnLoad', function(evt) {
        var response = evt.detail.xhr.response;
        var resultDiv = document.getElementById('result');
        var data = JSON.parse(response);
        var content = `<p>${data.message}</p><ul>`;
        data.items.forEach(function(item) {
            content += `<li>${item}</li>`;
        });
        content += `</ul>`;
        resultDiv.innerHTML = content;
    });
</script>
{% endblock %}
